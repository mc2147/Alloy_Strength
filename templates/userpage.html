<!-- {% load static %} -->
<!DOCTYPE html>
<html lang="en">


<!-- Include Vue.js Source Code -->
<script src='https://unpkg.com/vue'></script>
<!-- <script src="https://code.getmdl.io/1.3.0/material.min.js"></script> -->


<!-- Include HTML Code -->
<!-- Head --> 
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://code.jquery.com/jquery-1.12.4.js"></script>
    <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>


    <!-- Material Design code -->
    <!-- <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons"> -->
    <!--   <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.blue_grey-indigo.min.css"> -->
  
    <!-- Style Sheets -->
    <link rel="stylesheet" href="{% static 'userpage/userpage.css' %}">
    <link href="https://fonts.googleapis.com/css?family=Cabin:400,600,700" rel="stylesheet">

    <title>User Page</title>

</head>


<!-- Body --> 
<body>
    <h1>Welcome, athlete!</h1>
    <hr>

    <img src='{% static "userpage/user_interface.svg" %}'>


</head>
<body>

    <div id="left_container">
        <div id="date_text_container">
            <p> Date: </p>
            <p id="date_text"><p>
        </div>

        <hr id='dummy_divider'>

        <div id="datepicker"></div>
        <div id="summary">Content goes here</div>

    </div>

    <div id='right_container'>
        <table class='table_calendar'>
            <!-- ROW 1 (Header) --> 
            <tr>
                <th class='table_header'>Pattern</th>
                <th class='table_header'>Level</th>
                <th class='table_header'>Exercise</th>
                <th class='table_header'>Reps</th>
                <th class='table_header'>Weight</th>
                <th class='table_header'>RPE</th>
                <th class='table_header'>Tempo</th>
            </tr>

            <!-- ROW 2 (Pattern 1) --> 
            <tr class='table_content'>
                <th>Squat</th>
                <td><div>${ level }</div></td>
                <td><div>${ exercise }</div></td>
                <!--   <td><textarea rows="6" cols="24"></textarea></td> -->
                <td><div></textarea></td>
                <td><div>${ weight }</div></td>
                <td><div contenteditable class='editable_div'></div></td>
                <td><div>${ tempo }</div></td>
            </tr>

            <!-- ROW 3 (Pattern 2) --> 
            <tr class='table_content'>
                <th>UB Vert Push</th>
                <td><div></div></td>
                <td><div></div></td>
                <td><div></textarea></td>
                <td><div></div></td>
                <td><div contenteditable class='editable_div'></div></td>
                <td><div></div></td>
            </tr>

            <!-- ROW 4 (Pattern 3) --> 
            <tr class='table_content'>
                <th>Hinge</th>
                <td><div></div></td>
                <td><div></div></td>
                <td><div></textarea></td>
                <td><div></div></td>
                <td><div contenteditable class='editable_div'></div></td>
                <td><div></div></td>
            </tr>

            <!-- ROW 5 (Pattern 4) --> 
            <tr class='table_content'>
                <th>UB Hor Pull</th>
                <td><div></div></td>
                <td><div></div></td>
                <td><div></textarea></td>
                <td><div></div></td>
                <td><div contenteditable class='editable_div'></div></td>
                <td><div></div></td>
            </tr>

            <!-- ROW 6 (Pattern 5) --> 
            <tr class='table_content'>
                <th>Ant Chain</th>
                <td><div></div></td>
                <td><div></div></td>
                <td><div></textarea></td>
                <td><div></div></td>
                <td><div contenteditable class='editable_div'></div></td>
                <td><div></div></td>
            </tr>

        </table>
    </div>

</body>

</html>


<script>

    var vm = new Vue({
        el: '.table_calendar',
        delimiters: ['${', '}'],
        data: {
            pattern: "pattern",
            level: "level", 
            exercise: "exercise", 
            weight: "weight", 
            rpe: "rpe", 
            tempo: "tempo"
        }
    });

    console.log(vm); 

    $( function() {
        $( "#datepicker" ).datepicker();

        var currentDate = $( "#datepicker" ).val()

        $( "#date_text" ).text(currentDate);

        // Get selected date
        // reference: https://stackoverflow.com/questions/26667720/how-to-get-the-selected-date-from-jquery-datepicker

        console.log(currentDate);

        var URL = "{% url 'userpageUpdate' %}";


        function updateTempDate(){
            var TempDate = $( "#date_text" ).text(); 
            var data = {'TempDate': TempDate};
            console.log("I'm in updateTempDate"); 
            $.post(URL, data, function(response){
                console.log(JSON.stringify(response));
                vm.level = response.level;
                vm.exercise = response.exercise; 
                vm.weight = response.weight;
                vm.rpe = response.rpe; 
                vm.tempo = response.tempo; 
            });
        }

        $(document).ready(function(){
            $("#datepicker").on("change",function() {
                var newDate = $(this).val();
                $( "#date_text" ).text(newDate);
                updateTempDate(); 
                console.log(vm); 
            })

        });


    });
</script>


<style>


</style>


